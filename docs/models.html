<!DOCTYPE html>

<html>
<head>
  <title>models.js</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, target-densitydpi=160dpi, initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
  <link rel="stylesheet" media="all" href="docco.css" />
</head>
<body>
  <div id="container">
    <div id="background"></div>
    
      <ul id="jump_to">
        <li>
          <a class="large" href="javascript:void(0);">Jump To &hellip;</a>
          <a class="small" href="javascript:void(0);">+</a>
          <div id="jump_wrapper">
          <div id="jump_page_wrapper">
            <div id="jump_page">
              
                
                <a class="source" href="core.html">
                  core.js
                </a>
              
                
                <a class="source" href="models.html">
                  models.js
                </a>
              
                
                <a class="source" href="views.html">
                  views.js
                </a>
              
            </div>
          </div>
        </li>
      </ul>
    
    <ul class="sections">
        
          <li id="title">
              <div class="annotation">
                  <h1>models.js</h1>
              </div>
          </li>
        
        
        
        <li id="section-1">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-1">&#182;</a>
              </div>
              
            </div>
            
            <div class="content"><div class='highlight'><pre><span class="hljs-comment">/**
 * @file
 * Curricula UI JS application models.
 *
 * This defines the models used throughout the application. Note that this file
 * is written using Docco syntax. If Node is installed, you can generate this
 * documentation by running:
 *
 *   npm install
 *   npm run doc
 *
 * This will generate the documentation in the docs/ folder, in HTML format.
 */</span>
<span class="hljs-meta">
"use strict"</span>;
( <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"> Backbone, _, c </span>) </span>{</pre></div></div>
            
        </li>
        
        
        <li id="section-2">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-2">&#182;</a>
              </div>
              <p>This defines the models and collections used throughout the application.
They extend the global <code>CurriculaUI</code> namespace, aliased to
<code>c</code> for readability.</p>

            </div>
            
        </li>
        
        
        <li id="section-3">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-3">&#182;</a>
              </div>
              <h2 id="a-note-on-backbone">A note on Backbone</h2>

            </div>
            
        </li>
        
        
        <li id="section-4">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-4">&#182;</a>
              </div>
              <p>As all the models and collections are extending <em>Backbone</em>, it is useful to
see the official documentation on
<a href="http://backbonejs.org/#Model">Backbone.Model</a> and
<a href="http://backbonejs.org/#Collection">Backbone.Collection</a>.</p>

            </div>
            
        </li>
        
        
        <li id="section-5">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-5">&#182;</a>
              </div>
              <h2 id="item-model">Item model</h2>

            </div>
            
        </li>
        
        
        <li id="section-6">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-6">&#182;</a>
              </div>
              <p>Defines the data structure for a single item, like a Fachbereich or
Kompetenzstufe. Items have a reference to their parent item, via the parentId
attribute.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>c.ItemModel = Backbone.Model.extend({
  <span class="hljs-attr">defaults</span>: {
    <span class="hljs-attr">name</span>:        <span class="hljs-literal">undefined</span>,
    <span class="hljs-attr">type</span>:        <span class="hljs-literal">undefined</span>,
    <span class="hljs-attr">parentId</span>:    <span class="hljs-string">"root"</span>,
    <span class="hljs-attr">active</span>:      <span class="hljs-literal">false</span>,
    <span class="hljs-attr">expanded</span>:    <span class="hljs-literal">false</span>,
    <span class="hljs-attr">hasChildren</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">highlighted</span>: <span class="hljs-literal">false</span>,
    <span class="hljs-attr">data</span>:        {}
  },</pre></div></div>
            
        </li>
        
        
        <li id="section-7">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-7">&#182;</a>
              </div>
              <p>The model validates itself, checking that it received a valid name, as well
as a non-null parent identifier.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  validate: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> errors = [];
    <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.get( <span class="hljs-string">'name'</span> ) ) {
      errors.push( <span class="hljs-string">"An item requires a name."</span> );
    }
    <span class="hljs-keyword">if</span> ( !<span class="hljs-keyword">this</span>.get( <span class="hljs-string">'parentId'</span> ) ) {
      errors.push( <span class="hljs-string">"An item requires a parentId."</span> );
    }
    <span class="hljs-keyword">return</span> errors.length ? errors : <span class="hljs-literal">null</span>;
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-8">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-8">&#182;</a>
              </div>
              <h2 id="item-collection">Item collection</h2>

            </div>
            
        </li>
        
        
        <li id="section-9">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-9">&#182;</a>
              </div>
              <p>A collection of <code>CurriculaUI.ItemModel</code> models.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>c.ItemCollection = Backbone.Collection.extend({
  <span class="hljs-attr">model</span>: c.ItemModel,</pre></div></div>
            
        </li>
        
        
        <li id="section-10">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-10">&#182;</a>
              </div>
              <p>Backbone complains if no URL is defined. We could depend on the
localStorage plugin for Backbone to prevent this error, but that would be
overkill, as we only keep things in memory. Instead, provide a dummy URL.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  url:   <span class="hljs-string">'?dummyUrl'</span>
});</pre></div></div>
            
        </li>
        
        
        <li id="section-11">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-11">&#182;</a>
              </div>
              <h2 id="column-model">Column model</h2>

            </div>
            
        </li>
        
        
        <li id="section-12">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-12">&#182;</a>
              </div>
              <p>Defines the data structure for a single column. This has the particularity
of referencing a <em>View</em>, not the other way around. We use this to keep track
of the <code>CurriculaUI.ItemListView</code> elements used in the application,
so we can easily and cleanly manipulate them, like by hiding columns “to the
right” of a given column, or collapsing columns “to the left”.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>c.ColumnModel = Backbone.Model.extend({
  <span class="hljs-attr">defaults</span>: {
    <span class="hljs-attr">column</span>: <span class="hljs-literal">null</span>
  }
});</pre></div></div>
            
        </li>
        
        
        <li id="section-13">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-13">&#182;</a>
              </div>
              <h2 id="column-collection">Column collection</h2>

            </div>
            
        </li>
        
        
        <li id="section-14">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-14">&#182;</a>
              </div>
              <p>A collection of <code>CurriculaUI.ColumnModel</code> models.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>c.ColumnCollection = Backbone.Collection.extend({
  <span class="hljs-attr">model</span>: c.ColumnModel,</pre></div></div>
            
        </li>
        
        
        <li id="section-15">
            <div class="annotation">
              
              <div class="pilwrap ">
                <a class="pilcrow" href="#section-15">&#182;</a>
              </div>
              <p>Backbone complains if no URL is defined. We could depend on the
localStorage plugin for Backbone to prevent this error, but that would be
overkill, as we only keep things in memory. Instead, provide a dummy URL.</p>

            </div>
            
            <div class="content"><div class='highlight'><pre>  url:   <span class="hljs-string">'?dummyUrl'</span>
});

})( Backbone, _, <span class="hljs-built_in">window</span>.CurriculaUI || ( <span class="hljs-built_in">window</span>.CurriculaUI = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Object</span>() ) );</pre></div></div>
            
        </li>
        
    </ul>
  </div>
</body>
</html>
